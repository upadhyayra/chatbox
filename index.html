<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css">
    <title>Document</title>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4 chatbox p-0" style="overflow-y: auto;">

                <h1 class="text-white text-center  bg-primary" id="h1">chatbox</h1>
                <div style=" height: 550px;">
                    <ul id="ul"></ul>
                </div>
                <div class="input-group chatbox-input rounded">
                    <hr style="color:black;">
                    <form style="display: flex; width: 100%;">
                        <input type="text" class="form-control border-0" id="myText" placeholder="Enter a message...">
                        <button type="submit" onclick="sendmessage()"><i class="bi bi-send-fill text-primary mt-2"
                                id="submitbtn"></i></button>
                    </form>
                </div>
            </div>
            <div class="col-md-4" style="margin-top:60px ;">
                <a href="../Todo/Todo.html">Todo</a>
                <a href="../Todo/clock.html">Time</a>
            </div>
        </div>
    </div>
    <script>
        let form = document.querySelector('form')
        form.addEventListener('submit', sendmessage)

        let index = 0;
        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
        let array = ["How can i assist you today?", "Yes i am a chatbot how may i assist you", "Chatbot is a computer program designed to simulate conversation with human users, especially over the internet.", "hello 4"];
        function sendmessage(e) {
            e.preventDefault();
            let input = myText.value
            let li = document.createElement('li')
            let span = document.createElement('span')
            if (input.trim() == "") {
                alert("please enter a value")
                return
            }
            li.setAttribute('class', 'outgoing-list')
            span.setAttribute('class', 'span')
            span.style.background = "#9B59B6"
            span.innerHTML = input
            li.appendChild(span)
            ul.appendChild(li);
            const incomingLi = document.createElement('li');
            incomingLi.setAttribute('class', 'incoming-list');
            let adss = document.createElement('span')
            setTimeout(() => {
                adss.innerText = index < array.length ? array[index] : generateString(10)
            }, 1000)
            adss.innerText = "Thinking..."
            adss.setAttribute('class', 'bg-primary span')
            incomingLi.appendChild(adss)
            ul.appendChild(incomingLi)

            index++
            ul.scrollTo(0, ul.scrollHeight);
            myText.value = ""
        }


        function generateString(length) {
            let result = ' ';
            const charactersLength = characters.length;
            for (let i = 0; i < length; i++) {
                result += characters.charAt(Math.floor(Math.random() * charactersLength));
            }

            return result;
        }




    </script>
</body>

</html>